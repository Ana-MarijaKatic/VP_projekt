<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>

<body>
    <script>
        /*d3.json("Twitch_game_data.json", function(data) {
            d3.select("body")
                .selectAll("p")
                .data(data)
                .enter()
                .append("p")
                .text(function(d){
                    while(d.Month==1 && d.Year==2016){
                        return d.Game;
                        
                        
                    }
                });
        });
*/
        var data = [480241904, 441859897, 490669308, 377975447, 449836631, 446429345, 446331825, 382117373, 362833210, 453035001, 449688428, 490484523];
        var hours_watched = [];
        data.forEach(function (hours, index) {
            hours_watched[index] = Math.floor(hours / 1000000);
        });
        console.log(hours_watched);
        var margin = { top: 20, bottom: 70, left: 80, right: 60 }
        var width = 600 - margin.left - margin.right;
        var height = 300 - margin.top - margin.bottom;

        var color = d3.scaleLinear()
            .domain([0, d3.max(data)])
            .range(["blue", "red"]);

        var svg = d3.select("body")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        var x = d3.scaleBand()
            .domain(d3.range(data.length))
            .rangeRound([0, width])
            .paddingInner(0.05);

        var y = d3.scaleLinear()
            .domain([0, d3.max(data)])
            .range([height, 0]);



        var xAxis = d3.axisBottom(x)
            .tickSize(0)
            .tickFormat(function (d, i) {
                return i + 1;
            })
        var yAxis = d3.axisLeft(y)
            .tickSize(0)
            .tickFormat(function (d) {
                return d;
            })

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + (height + 2) + ")")
            .call(xAxis)
            .append("text")
            .attr("x", 250)
            .attr("dy", "4em")
            .style("text-anchor", "end")
            .style("fill", "black")
            .text("Mjeseci");


        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append("text")
            .attr("transform", "rotate(0)")
            .attr("x", 75)
            .attr("dy", "-1em")
            .style("text-anchor", "end")
            .style("fill", "black")
            .text("Milijuni sati gladanja");


        var barchart = svg.selectAll("rect")
            .data(data)
            .enter()
            .append("rect")
            .attr("x", function (d, i) {
                return x(i);
            })
            .attr("y", function (d) { return y(d); })
            .attr("width", x.bandwidth())
            .attr("height", function (d) { return height - y(d); })
            .attr("fill", function (d, i) {
                return color(d);
            })
            .attr("stroke", "white")
            .on("mouseenter", function (d) {
                d3.select("div").html(d);
            })
            .on("mouseover", function (d) {
                div.transition()
                    .duration(200)
                    .style("opacity", .9);
                div.html(formatTime(d.date) + "<br/>" + d.close)
                    .style("left", (d3.event.pageX) + "px")
                    .style("top", (d3.event.pageY - 28) + "px");
            })
            .on("mouseout", function (d) {
                div.transition()
                    .duration(500)
                    .style("opacity", 0);
            });



    </script>
    <div></div>
</body>

</html>